{% extends 'base.html' %}
{% load static %}
{% block content %}
  <section class="flex flex-col container mx-auto mt-4 sm:mt-10 mb-6 px-2 min-[390px]:px-7 lg:px-20">
    <!-- Breadcrumb Start -->
    <div class="flex justify-between items-center flex-wrap gap-3 text-sm sm:text-base">
      <h1 class="font-bold w-1/2 text-text text-xl sm:text-2xl">Launches</h1>
      <div>
        <ol class="flex items-baseline gap-2 text-sm sm:text-base">
          <li>
            <a class="font-medium text-text text-nowrap" href="{% url 'home' %}">SpaceBio /</a>
          </li>
          <li>
            <a class="font-medium text-text text-nowrap" href="{% url 'launches' %}">Launches</a>
          </li>
          <li class="font-medium hidden sm:inline text-text/60">/ {{ launch.name }}</li>
        </ol>
      </div>
    </div>

    <div class="flex flex-col gap-8">
      <!-- Launch Details Start -->
      <div class="flex items-stretch sm:gap-6 mt-8">
        <div class="relative flex justify-center h-72 xl:max-h-80 w-1/2">
          <div class="group w-full h-full rounded-t-lg shadow-md overflow-hidden">
            <img src="{{ launch.image }}" alt="{{ launch.name }}" class="w-full h-full object-cover rounded-t-lg" />
          </div>
        </div>
        <div class="w-full h-72 flex-1 flex flex-col gap-1 sm:rounded-lg bg-gradient-to-br from-slate-800 to-background text-text items-center justify-between p-4">
          <p class="text-sm">{{ launch.launch_service_provider.name }}</p>
          <h2 class="text-xl font-semibold">{{ launch.name }}</h2>
          <p class="text-sm">{{ launch.status.description }}</p>
          <p class="text-sm">{{ launch.net|date:'F j, Y, g:i a' }} UTC</p>
          <p class="text-sm">Launch Window: {{ launch.window_start|date:'F j, Y, g:i a' }} - {{ launch.window_end|date:'F j, Y, g:i a' }} UTC</p>
        </div>
      </div>

      <!-- Launch provider -->
      <div class="w-full h-full flex flex-col sm:flex-row gap-1 sm:rounded-lg bg-gradient-to-br from-slate-800 to-background text-text justify-between items-stretch">
        <div class="w-full sm:w-1/3 flex justify-center items-center max-h-72">
          <img src="{{ launch.launch_service_provider.logo_url }}" alt="" class="w-full h-full rounded-full object-contain max-w-xs" />
        </div>
        <div class="w-full sm:w-2/3  p-4 h-full flex flex-col gap-4 items-center justify-between text-center">
          <h3 class="text-xl font-semibold">{{ launch.launch_service_provider.name }}</h3>
          <p>{{ launch.launch_service_provider.description }}</p>
          <div class="w-full flex justify-around items-center">
            <a href="" class="p-2 flex items-center gap-2"><i class="fi fi-rr-building"></i>Agency</a>
            <a href="" class="p-2 flex items-center gap-2"><i class="fi fi-rr-globe"></i>Website</a>
          </div>
        </div>
      </div>

      <!-- Mission details -->
      <div class="w-full h-full flex flex-col sm:flex-row gap-1 sm:rounded-lg bg-gradient-to-br from-slate-800 to-background text-text justify-between items-stretch">
        <div class="w-full sm:w-1/3 flex justify-center items-center">
          <img src="{{ launch.image }}" alt="" class="w-full h-full object-contain max-h-72" />
        </div>
        <div class="w-full sm:w-2/3 h-full flex flex-col gap-4 items-center justify-between text-center p-4">
          <h3 class="text-xl font-semibold">{{ launch.mission.name }}</h3>
          <p>{{ launch.mission.description }}</p>
          <div class="w-full flex justify-around items-center">
            <a href="" class="p-2 flex items-center gap-2"><i class="fi fi-rr-building"></i>Agency</a>
            <a href="" class="p-2 flex items-center gap-2"><i class="fi fi-rr-globe"></i>Website</a>
          </div>
        </div>
      </div>

      <!-- Rocket Details -->
      <div class="w-full h-full flex flex-col gap-1 sm:rounded-lg bg-gradient-to-br from-slate-800 to-background text-text justify-between p-4">
        <h3 class="text-xl font-semibold">Rocket Details</h3>
        <p>
          <strong>Name:</strong> {{ launch.rocket.configuration.name }}
        </p>
        <p>
          <strong>Manufacturer:</strong> {{ launch.rocket.configuration.manufacturer.name }}
        </p>
        <p>{{ launch.rocket.configuration.description }}</p>
      </div>

      <!-- Launch Pad Details -->
      <div class="w-full h-full flex flex-col gap-1 sm:rounded-lg bg-gradient-to-br from-slate-800 to-background text-text justify-between p-4">
        <h3 class="text-xl font-semibold">Launch Pad</h3>
        <p>
          <strong>Name:</strong> {{ launch.pad.name }}
        </p>
        <p>
          <strong>Location:</strong> {{ launch.pad.location.name }}, {{ launch.pad.location.country_code }}
        </p>
        <a href="{{ launch.pad.map_url }}" target="_blank" class="text-blue-500">View on Map</a>
        <p>{{ launch.pad.location.description }}</p>
      </div>

      <!-- Updates -->
      <div class="w-full h-full flex flex-col gap-1 sm:rounded-lg bg-gradient-to-br from-slate-800 to-background text-text justify-between p-4">
        <h3 class="text-xl font-semibold">Updates</h3>
        {% for update in launch.updates.all %}
          <div class="flex gap-4 items-center mb-2">
            <img src="{{ update.profile_image }}" alt="{{ update.created_by }}" class="w-10 h-10 rounded-full" />
            <div>
              <p class="font-semibold">{{ update.created_by }}</p>
              <p>{{ update.comment }}</p>
              <a href="{{ update.info_url }}" target="_blank" class="text-blue-500">More info</a>
              <p class="text-xs text-gray-400">{{ update.created_on|date:'F j, Y, g:i a' }} UTC</p>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </section>
  <script src="{% static 'js/launch_time.js' %}"></script>
{% endblock %}
